"use client";

import Link from "next/link";
import React from "react";
import { useUser, SignInButton } from "@clerk/nextjs"; // Import the necessary hooks from Clerk
import Image from "next/image";
import gif from "../public/ScreenRecording2024-06-22at11.06.48PM-ezgif.com-video-to-gif-converter.gif";
import { DataType, HistoryEntryType, LessonType } from "./types";
import { useRouter } from "next/navigation";
import imgOne from "../public/images/littleWomen.png";
import imgTwo from "../public/images/hungerGames.png";
import imgThree from "../public/images/wows.jpeg";
import imgFour from "../public/images/gump.png";
import LittleWoman from '../components/scripts/LittleWoman';
import HungerGames from '../components/scripts/HungerGames';
import Wows from '../components/scripts/Wows';
import ForestGump from '../components/scripts/ForestGump';

const lessons: Array<LessonType> = [
  {
    image: imgOne,
    title: "Little Women",
    speechType: "monologue",
    lessonId: "id1",
    videoLink: "http://localhost:3000/videos/LittleWoman.mp4",
    videoId: "videoId1",
    scriptComponent: LittleWoman,
  },
  {
    image: imgTwo,
    title: "Hunger Games",
    speechType: "monologue",
    lessonId: "id2",
    videoLink: "http://localhost:3000/videos/HungerGames.mp4",
    videoId: "videoId2",
    scriptComponent: HungerGames,
  },
  {
    image: imgThree,
    title: "Wolf of Wall Street",
    speechType: "dialogue",
    lessonId: "id3",
    videoLink: "http://localhost:3000/videos/wows.mp4",
    videoId: "videoId3",
    scriptComponent: Wows,
  },
  {
    image: imgFour,
    title: "Forest Gump",
    speechType: "monologue",
    lessonId: "id4",
    videoLink: "http://localhost:3000/videos/ForestGump.mp4",
    videoId: "videoId4",
    scriptComponent: ForestGump,
  },
];

const historyEntryList: Array<HistoryEntryType> = [
  {
    lessonId: "id2",
    score: 20,
  },
  {
    lessonId: "id1",
    score: 10,
  },
  {
    lessonId: "id3",
    score: 30,
  },
];
export const Context = React.createContext({ lessons, historyEntryList });

const data: DataType = { lessons, historyEntryList };

export default function Home() {
  const { isSignedIn } = useUser(); // Get the user's authentication status
  const router = useRouter();
  if (isSignedIn) {
    router.push("/home");
  } else {
    // Render the landing page if the user is not signed in
    return (
      <div className="relative flex flex-col items-center justify-center min-h-screen bg-gray-100 text-center">
        <Image
          src={gif}
          alt="Background Image"
          layout="fill"
          objectFit="cover"
          className="absolute z-0"
        />
        <div className="absolute top-0 left-[70px] p-6">
          <div className="flex items-center">
            <svg
              width="143"
              height="48"
              viewBox="0 0 143 48"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M25.7866 10.9062L20.5466 11.9462L24.1999 16.6662L26.8266 16.1329L25.7866 10.9062ZM16.6266 12.7196L13.9999 13.2396L17.6666 17.9462L20.2799 17.4263L16.6266 12.7196ZM10.0932 13.9996L7.46658 14.5462L11.1332 19.2529L13.7466 18.7329L10.0932 13.9996ZM3.54658 15.3329L2.23991 15.5863C1.54709 15.7247 0.937514 16.1324 0.545032 16.7199C0.152551 17.3073 0.00924417 18.0265 0.146578 18.7196L0.666578 21.3329L7.19991 20.0396L3.54658 15.3329ZM0.666578 21.3329V34.6663C0.666578 35.3735 0.947529 36.0518 1.44763 36.5519C1.94772 37.052 2.626 37.3329 3.33324 37.3329H24.6666C26.1466 37.3329 27.3332 36.1462 27.3332 34.6663V21.3329H0.666578Z"
                fill="#D73939"
              />
              <path
                d="M34.75 30.2656L39.1562 29.5938C39.3438 30.4479 39.724 31.099 40.2969 31.5469C40.8698 31.9844 41.6719 32.2031 42.7031 32.2031C43.8385 32.2031 44.6927 31.9948 45.2656 31.5781C45.651 31.2865 45.8438 30.8958 45.8438 30.4062C45.8438 30.0729 45.7396 29.7969 45.5312 29.5781C45.3125 29.3698 44.8229 29.1771 44.0625 29C40.5208 28.2188 38.276 27.5052 37.3281 26.8594C36.0156 25.9635 35.3594 24.7188 35.3594 23.125C35.3594 21.6875 35.9271 20.4792 37.0625 19.5C38.1979 18.5208 39.9583 18.0312 42.3438 18.0312C44.6146 18.0312 46.3021 18.401 47.4062 19.1406C48.5104 19.8802 49.2708 20.974 49.6875 22.4219L45.5469 23.1875C45.3698 22.5417 45.0312 22.0469 44.5312 21.7031C44.0417 21.3594 43.3385 21.1875 42.4219 21.1875C41.2656 21.1875 40.4375 21.349 39.9375 21.6719C39.6042 21.901 39.4375 22.1979 39.4375 22.5625C39.4375 22.875 39.5833 23.1406 39.875 23.3594C40.2708 23.651 41.6354 24.0625 43.9688 24.5938C46.3125 25.125 47.9479 25.776 48.875 26.5469C49.7917 27.3281 50.25 28.4167 50.25 29.8125C50.25 31.3333 49.6146 32.6406 48.3438 33.7344C47.0729 34.8281 45.1927 35.375 42.7031 35.375C40.4427 35.375 38.651 34.9167 37.3281 34C36.0156 33.0833 35.1562 31.8385 34.75 30.2656ZM52.5625 30.2656L56.9688 29.5938C57.1562 30.4479 57.5365 31.099 58.1094 31.5469C58.6823 31.9844 59.4844 32.2031 60.5156 32.2031C61.651 32.2031 62.5052 31.9948 63.0781 31.5781C63.4635 31.2865 63.6562 30.8958 63.6562 30.4062C63.6562 30.0729 63.5521 29.7969 63.3438 29.5781C63.125 29.3698 62.6354 29.1771 61.875 29C58.3333 28.2188 56.0885 27.5052 55.1406 26.8594C53.8281 25.9635 53.1719 24.7188 53.1719 23.125C53.1719 21.6875 53.7396 20.4792 54.875 19.5C56.0104 18.5208 57.7708 18.0312 60.1562 18.0312C62.4271 18.0312 64.1146 18.401 65.2188 19.1406C66.3229 19.8802 67.0833 20.974 67.5 22.4219L63.3594 23.1875C63.1823 22.5417 62.8438 22.0469 62.3438 21.7031C61.8542 21.3594 61.151 21.1875 60.2344 21.1875C59.0781 21.1875 58.25 21.349 57.75 21.6719C57.4167 21.901 57.25 22.1979 57.25 22.5625C57.25 22.875 57.3958 23.1406 57.6875 23.3594C58.0833 23.651 59.4479 24.0625 61.7812 24.5938C64.125 25.125 65.7604 25.776 66.6875 26.5469C67.6042 27.3281 68.0625 28.4167 68.0625 29.8125C68.0625 31.3333 67.4271 32.6406 66.1562 33.7344C64.8854 34.8281 63.0052 35.375 60.5156 35.375C58.2552 35.375 56.4635 34.9167 55.1406 34C53.8281 33.0833 52.9688 31.8385 52.5625 30.2656ZM81.5312 29.7188L85.9062 30.4531C85.3438 32.0573 84.4531 33.2812 83.2344 34.125C82.026 34.9583 80.5104 35.375 78.6875 35.375C75.8021 35.375 73.6667 34.4323 72.2812 32.5469C71.1875 31.0365 70.6406 29.1302 70.6406 26.8281C70.6406 24.0781 71.3594 21.9271 72.7969 20.375C74.2344 18.8125 76.0521 18.0312 78.25 18.0312C80.7188 18.0312 82.6667 18.849 84.0938 20.4844C85.5208 22.1094 86.2031 24.6042 86.1406 27.9688H75.1406C75.1719 29.2708 75.526 30.2865 76.2031 31.0156C76.8802 31.7344 77.724 32.0938 78.7344 32.0938C79.4219 32.0938 80 31.9062 80.4688 31.5312C80.9375 31.1562 81.2917 30.5521 81.5312 29.7188ZM81.7812 25.2812C81.75 24.0104 81.4219 23.0469 80.7969 22.3906C80.1719 21.724 79.4115 21.3906 78.5156 21.3906C77.5573 21.3906 76.7656 21.7396 76.1406 22.4375C75.5156 23.1354 75.2083 24.0833 75.2188 25.2812H81.7812ZM104.828 35H100.438V26.5312C100.438 24.7396 100.344 23.5833 100.156 23.0625C99.9688 22.5312 99.6615 22.1198 99.2344 21.8281C98.8177 21.5365 98.3125 21.3906 97.7188 21.3906C96.9583 21.3906 96.276 21.599 95.6719 22.0156C95.0677 22.4323 94.651 22.9844 94.4219 23.6719C94.2031 24.3594 94.0938 25.6302 94.0938 27.4844V35H89.7031V18.4062H93.7812V20.8438C95.2292 18.9688 97.0521 18.0312 99.25 18.0312C100.219 18.0312 101.104 18.2083 101.906 18.5625C102.708 18.9062 103.312 19.349 103.719 19.8906C104.135 20.4323 104.422 21.0469 104.578 21.7344C104.745 22.4219 104.828 23.4062 104.828 24.6875V35ZM123.766 23.3125L119.438 24.0938C119.292 23.2292 118.958 22.5781 118.438 22.1406C117.927 21.7031 117.26 21.4844 116.438 21.4844C115.344 21.4844 114.469 21.8646 113.812 22.625C113.167 23.375 112.844 24.6354 112.844 26.4062C112.844 28.375 113.172 29.7656 113.828 30.5781C114.495 31.3906 115.385 31.7969 116.5 31.7969C117.333 31.7969 118.016 31.5625 118.547 31.0938C119.078 30.6146 119.453 29.7969 119.672 28.6406L123.984 29.375C123.536 31.3542 122.677 32.849 121.406 33.8594C120.135 34.8698 118.432 35.375 116.297 35.375C113.87 35.375 111.932 34.6094 110.484 33.0781C109.047 31.5469 108.328 29.4271 108.328 26.7188C108.328 23.9792 109.052 21.849 110.5 20.3281C111.948 18.7969 113.906 18.0312 116.375 18.0312C118.396 18.0312 120 18.4688 121.188 19.3438C122.385 20.2083 123.245 21.5312 123.766 23.3125ZM136.719 29.7188L141.094 30.4531C140.531 32.0573 139.641 33.2812 138.422 34.125C137.214 34.9583 135.698 35.375 133.875 35.375C130.99 35.375 128.854 34.4323 127.469 32.5469C126.375 31.0365 125.828 29.1302 125.828 26.8281C125.828 24.0781 126.547 21.9271 127.984 20.375C129.422 18.8125 131.24 18.0312 133.438 18.0312C135.906 18.0312 137.854 18.849 139.281 20.4844C140.708 22.1094 141.391 24.6042 141.328 27.9688H130.328C130.359 29.2708 130.714 30.2865 131.391 31.0156C132.068 31.7344 132.911 32.0938 133.922 32.0938C134.609 32.0938 135.188 31.9062 135.656 31.5312C136.125 31.1562 136.479 30.5521 136.719 29.7188ZM136.969 25.2812C136.938 24.0104 136.609 23.0469 135.984 22.3906C135.359 21.724 134.599 21.3906 133.703 21.3906C132.745 21.3906 131.953 21.7396 131.328 22.4375C130.703 23.1354 130.396 24.0833 130.406 25.2812H136.969Z"
                fill="#D73939"
              />
            </svg>
          </div>
        </div>
        <div className="absolute top-0 right-[70px] p-6">
          <SignInButton mode="modal">
            <button
              style={{ backgroundColor: "#D73939" }}
              className="px-4 py-2 text-white rounded"
            >
              Get Started
            </button>
          </SignInButton>
        </div>
        <div className="relative z-10 flex flex-col items-center">
          <svg
            width="625"
            height="227"
            viewBox="0 0 625 227"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <g filter="url(#filter0_d_43_5618)">
              <g filter="url(#filter1_d_43_5618)">
                <path
                  d="M161.432 47.375L141.173 51.396L155.298 69.6452L165.453 67.5831L161.432 47.375ZM126.016 54.386L115.861 56.3965L130.037 74.5941L140.142 72.5836L126.016 54.386ZM100.756 59.3349L90.6007 61.4485L104.777 79.6461L114.881 77.6356L100.756 59.3349ZM75.4446 64.49L70.3926 65.4695C67.7139 66.0047 65.357 67.5811 63.8396 69.8524C62.3221 72.1238 61.768 74.9045 62.299 77.5841L64.3095 87.6881L89.5697 82.6877L75.4446 64.49ZM64.3095 87.6881V139.239C64.3095 141.974 65.3958 144.596 67.3293 146.53C69.2629 148.463 71.8853 149.55 74.6198 149.55H157.102C162.824 149.55 167.412 144.962 167.412 139.239V87.6881H64.3095Z"
                  fill="#D73939"
                />
              </g>
              <path
                d="M196.088 122.695L213.124 120.098C213.849 123.4 215.319 125.917 217.534 127.649C219.749 129.341 222.851 130.186 226.838 130.186C231.228 130.186 234.53 129.381 236.745 127.77C238.235 126.642 238.981 125.132 238.981 123.239C238.981 121.95 238.578 120.883 237.772 120.037C236.927 119.232 235.034 118.487 232.094 117.802C218.4 114.781 209.721 112.023 206.056 109.525C200.982 106.062 198.444 101.249 198.444 95.0871C198.444 89.5292 200.639 84.8574 205.029 81.0716C209.419 77.2858 216.225 75.3929 225.448 75.3929C234.228 75.3929 240.753 76.8226 245.022 79.6821C249.291 82.5416 252.231 86.7704 253.842 92.3686L237.833 95.3287C237.148 92.8317 235.839 90.9187 233.906 89.5896C232.013 88.2606 229.295 87.596 225.75 87.596C221.28 87.596 218.078 88.2203 216.145 89.4688C214.856 90.3548 214.212 91.5027 214.212 92.9123C214.212 94.1205 214.776 95.1475 215.903 95.9933C217.434 97.121 222.71 98.7118 231.731 100.766C240.793 102.82 247.116 105.337 250.7 108.317C254.245 111.338 256.017 115.547 256.017 120.943C256.017 126.823 253.56 131.878 248.646 136.107C243.733 140.335 236.463 142.45 226.838 142.45C218.098 142.45 211.171 140.678 206.056 137.134C200.982 133.589 197.659 128.777 196.088 122.695ZM264.958 122.695L281.994 120.098C282.719 123.4 284.189 125.917 286.404 127.649C288.619 129.341 291.72 130.186 295.707 130.186C300.097 130.186 303.4 129.381 305.615 127.77C307.105 126.642 307.85 125.132 307.85 123.239C307.85 121.95 307.447 120.883 306.642 120.037C305.796 119.232 303.903 118.487 300.963 117.802C287.27 114.781 278.591 112.023 274.926 109.525C269.851 106.062 267.314 101.249 267.314 95.0871C267.314 89.5292 269.509 84.8574 273.899 81.0716C278.288 77.2858 285.095 75.3929 294.318 75.3929C303.098 75.3929 309.622 76.8226 313.891 79.6821C318.16 82.5416 321.1 86.7704 322.711 92.3686L306.702 95.3287C306.017 92.8317 304.709 90.9187 302.775 89.5896C300.882 88.2606 298.164 87.596 294.62 87.596C290.149 87.596 286.947 88.2203 285.014 89.4688C283.726 90.3548 283.081 91.5027 283.081 92.9123C283.081 94.1205 283.645 95.1475 284.773 95.9933C286.303 97.121 291.579 98.7118 300.601 100.766C309.662 102.82 315.985 105.337 319.57 108.317C323.114 111.338 324.886 115.547 324.886 120.943C324.886 126.823 322.429 131.878 317.516 136.107C312.602 140.335 305.333 142.45 295.707 142.45C286.968 142.45 280.04 140.678 274.926 137.134C269.851 133.589 266.528 128.777 264.958 122.695ZM376.961 120.581L393.876 123.42C391.701 129.622 388.258 134.355 383.546 137.617C378.874 140.839 373.014 142.45 365.966 142.45C354.81 142.45 346.554 138.805 341.197 131.515C336.968 125.676 334.854 118.305 334.854 109.405C334.854 98.7722 337.633 90.4555 343.191 84.4546C348.749 78.4135 355.777 75.3929 364.274 75.3929C373.82 75.3929 381.351 78.5544 386.868 84.8775C392.386 91.1603 395.024 100.806 394.782 113.815H352.253C352.373 118.849 353.743 122.776 356.361 125.595C358.978 128.374 362.241 129.763 366.147 129.763C368.805 129.763 371.041 129.038 372.853 127.589C374.665 126.139 376.035 123.803 376.961 120.581ZM377.928 103.424C377.807 98.5104 376.538 94.785 374.122 92.2477C371.705 89.6702 368.765 88.3814 365.301 88.3814C361.596 88.3814 358.535 89.7306 356.119 92.429C353.702 95.1274 352.514 98.7923 352.555 103.424H377.928ZM467.035 141H450.059V108.257C450.059 101.33 449.697 96.8592 448.972 94.8454C448.247 92.7914 447.059 91.2006 445.407 90.0729C443.796 88.9452 441.843 88.3814 439.548 88.3814C436.607 88.3814 433.969 89.1869 431.634 90.7979C429.298 92.4088 427.687 94.5434 426.801 97.2015C425.955 99.8596 425.532 104.773 425.532 111.942V141H408.556V76.8427H424.324V86.267C429.922 79.0176 436.97 75.3929 445.468 75.3929C449.213 75.3929 452.637 76.0775 455.738 77.4469C458.839 78.7759 461.175 80.4876 462.746 82.5819C464.357 84.6761 465.464 87.0523 466.068 89.7104C466.713 92.3686 467.035 96.1745 467.035 101.128V141ZM540.254 95.812L523.52 98.8326C522.956 95.4898 521.667 92.9727 519.653 91.2812C517.68 89.5896 515.102 88.7439 511.921 88.7439C507.692 88.7439 504.309 90.2139 501.772 93.1539C499.275 96.0537 498.026 100.927 498.026 107.774C498.026 115.385 499.295 120.762 501.832 123.903C504.41 127.045 507.853 128.616 512.162 128.616C515.384 128.616 518.022 127.709 520.076 125.897C522.13 124.044 523.58 120.883 524.426 116.412L541.1 119.252C539.368 126.904 536.045 132.683 531.132 136.59C526.218 140.497 519.633 142.45 511.377 142.45C501.993 142.45 494.502 139.49 488.904 133.569C483.346 127.649 480.567 119.453 480.567 108.982C480.567 98.3896 483.366 90.1535 488.964 84.2734C494.562 78.353 502.134 75.3929 511.679 75.3929C519.492 75.3929 525.695 77.0844 530.286 80.4675C534.917 83.8102 538.24 88.9251 540.254 95.812ZM590.335 120.581L607.25 123.42C605.076 129.622 601.632 134.355 596.92 137.617C592.248 140.839 586.388 142.45 579.34 142.45C568.184 142.45 559.928 138.805 554.571 131.515C550.343 125.676 548.228 118.305 548.228 109.405C548.228 98.7722 551.007 90.4555 556.565 84.4546C562.123 78.4135 569.151 75.3929 577.649 75.3929C587.194 75.3929 594.725 78.5544 600.243 84.8775C605.76 91.1603 608.398 100.806 608.157 113.815H565.627C565.748 118.849 567.117 122.776 569.735 125.595C572.353 128.374 575.615 129.763 579.521 129.763C582.18 129.763 584.415 129.038 586.227 127.589C588.04 126.139 589.409 123.803 590.335 120.581ZM591.302 103.424C591.181 98.5104 589.912 94.785 587.496 92.2477C585.079 89.6702 582.139 88.3814 578.676 88.3814C574.97 88.3814 571.91 89.7306 569.493 92.429C567.077 95.1274 565.889 98.7923 565.929 103.424H591.302Z"
                fill="#D73939"
              />
            </g>
            <defs>
              <filter
                id="filter0_d_43_5618"
                x="38"
                y="24.1387"
                width="586.519"
                height="155.723"
                filterUnits="userSpaceOnUse"
                color-interpolation-filters="sRGB"
              >
                <feFlood flood-opacity="0" result="BackgroundImageFix" />
                <feColorMatrix
                  in="SourceAlpha"
                  type="matrix"
                  values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"
                  result="hardAlpha"
                />
                <feOffset dy="4" />
                <feGaussianBlur stdDeviation="8" />
                <feComposite in2="hardAlpha" operator="out" />
                <feColorMatrix
                  type="matrix"
                  values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.1 0"
                />
                <feBlend
                  mode="normal"
                  in2="BackgroundImageFix"
                  result="effect1_dropShadow_43_5618"
                />
                <feBlend
                  mode="normal"
                  in="SourceGraphic"
                  in2="effect1_dropShadow_43_5618"
                  result="shape"
                />
              </filter>
              <filter
                id="filter1_d_43_5618"
                x="-7.86161"
                y="-10.2575"
                width="247.446"
                height="247.446"
                filterUnits="userSpaceOnUse"
                color-interpolation-filters="sRGB"
              >
                <feFlood flood-opacity="0" result="BackgroundImageFix" />
                <feColorMatrix
                  in="SourceAlpha"
                  type="matrix"
                  values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"
                  result="hardAlpha"
                />
                <feOffset dy="15.4654" />
                <feGaussianBlur stdDeviation="30.9308" />
                <feComposite in2="hardAlpha" operator="out" />
                <feColorMatrix
                  type="matrix"
                  values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.1 0"
                />
                <feBlend
                  mode="normal"
                  in2="BackgroundImageFix"
                  result="effect1_dropShadow_43_5618"
                />
                <feBlend
                  mode="normal"
                  in="SourceGraphic"
                  in2="effect1_dropShadow_43_5618"
                  result="shape"
                />
              </filter>
            </defs>
          </svg>

          <p className="text-white text-2xl mb-8">
            From practice to <span className="font-bold">performance</span>
          </p>
          <SignInButton mode="modal">
            <button
              style={{ backgroundColor: "#D73939" }}
              className="px-6 py-3 text-white rounded text-lg"
            >
              {"Let's begin!"}
            </button>
          </SignInButton>
        </div>
      </div>
    );
  }

  // Render the main content if the user is signed in
  return (
    <Context.Provider value={data}>
      <div>
        <Link href="/home">go to home page</Link>
      </div>
      <div>
        <Link href="/history">go to history page</Link>
      </div>
      <div>
        <Link href="/profile">go to profile page</Link>
      </div>
    </Context.Provider>
  );
}
